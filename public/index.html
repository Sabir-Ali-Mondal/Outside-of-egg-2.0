<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Story Platform</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="centered-container">
        <div class="container">
            <div class="text-center intro-container">
                <video class="background-video" autoplay muted loop>
                    <source src="https://res.cloudinary.com/dmttn34te/video/upload/v1735058481/Standard_Mode_An_egg_rests_on_a_clean_white_ba_htcxt6.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <h1 class="cute-header">
                    <i class="cute-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="1em" height="1em" fill="currentColor">
                            <g>
                                <g>
                                    <path d="M25.083,17.79l-0.254-0.965l-0.59,0.305c-0.125-1.203-0.437-3.527-1.088-5.032l2.374,1.135l-0.441-1.672C23.614,5.993,20.145,0,16,0c-4.144,0-7.614,5.993-9.084,11.561L6.494,13.16l2.346-1.024c-0.966,1.974-0.902,4.009-0.747,5.16l-0.941-0.399L6.916,17.79c-0.441,1.671-0.674,3.211-0.674,4.452C6.242,27.623,10.619,32,16,32s9.758-4.377,9.758-9.758C25.758,21.001,25.524,19.461,25.083,17.79z M21.037,13.456c0,0.862-0.697,1.56-1.561,1.56c-0.86,0-1.561-0.698-1.561-1.56c0-0.862,0.699-1.561,1.561-1.561C20.34,11.895,21.037,12.594,21.037,13.456z M16,18.398l-0.103-0.047c-0.408-0.354-1.449-2.35-1.449-2.664c0-0.345,1.207-0.672,1.517-0.672s1.585,0.379,1.585,0.672c0,0.268-1.05,2.316-1.455,2.667L16,18.398z M12.703,11.895c0.861,0,1.56,0.699,1.56,1.561c0,0.862-0.699,1.56-1.56,1.56c-0.862,0-1.561-0.698-1.561-1.56C11.142,12.594,11.841,11.895,12.703,11.895z M16,1.601c2.766,0,5.51,4.203,7.021,8.662L21.616,9.59l-2.508,1.294l-3.129-1.272l-2.742,1.266l-2.592-1.276L8.952,10.34C10.457,5.854,13.219,1.601,16,1.601z M16,30.398c-4.498,0-8.157-3.658-8.157-8.156c0-0.871,0.141-1.965,0.402-3.143l2.496,1.06l2.432-1.275L16,20.152l2.874-1.283l2.986,1.292l1.911-0.987c0.25,1.151,0.387,2.217,0.387,3.069C24.157,26.74,20.497,30.398,16,30.398z" />
                                    <path d="M19.608,14.333c0.399,0,0.723-0.324,0.723-0.724c0-0.14-0.05-0.264-0.118-0.375c-0.072,0.094-0.179,0.158-0.305,0.158c-0.213,0-0.387-0.173-0.387-0.387c0-0.038,0.012-0.073,0.021-0.108c-0.367,0.035-0.658,0.334-0.658,0.711C18.885,14.009,19.208,14.333,19.608,14.333z" />
                                    <path d="M12.834,14.333c0.399,0,0.723-0.324,0.723-0.724c0-0.14-0.05-0.264-0.12-0.375c-0.07,0.094-0.177,0.158-0.304,0.158c-0.213,0-0.386-0.173-0.386-0.387c0-0.038,0.011-0.073,0.021-0.108c-0.367,0.035-0.659,0.334-0.659,0.711C12.11,14.009,12.434,14.333,12.834,14.333z" />
                                </g>
                            </g>
                        </svg>
                    </i>
                    Outside of Egg
                </h1>
                <div class="typing-container" style="margin-bottom:10px; opacity:0.8;">
                    <span id="typing-text"></span>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-6 order-md-2">
                    <div class="section">
                        <h5 class="form-label text-center mb-4" style="font-size: 1.5rem; font-weight: 600;">Story Generator</h5>
                        <div class="container" style="box-shadow:none;padding:0px;">
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <div class="mb-3">
                                        <div class="toggle-container">
                                            <input type="radio" id="ageSelectOption" name="ageOption" class="toggle-radio" checked>
                                            <label for="ageSelectOption" class="toggle-label">Select Age</label>
                                            <input type="radio" id="ageInputOption" name="ageOption" class="toggle-radio">
                                            <label for="ageInputOption" class="toggle-label">Enter Age</label>
                                            <span class="toggle-slider"></span>
                                        </div>
                                        <div id="ageInputDiv" style="display: none; margin-top: 0.75rem;">
                                            <input type="number" id="ageInput" class="form-control form-control-sm" placeholder="Enter Age" min="1" max="100" value="5" style="font-size: 0.875rem; padding: 0.375rem 0.75rem;">
                                        </div>
                                        <div id="ageSelectDiv" class="mt-2">
                                            <select id="ageSelect" class="form-control form-control-sm" style="font-size: 0.875rem; padding: 0.375rem 0.75rem;">
                                                <option value="4-7">4-7 years</option>
                                                <option value="8-11">8-11 years</option>
                                                <option value="12-15">12-15 years</option>
                                            </select>
                                        </div>
                                        <input type="hidden" id="combinedAge" value="5" />
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="input-group mb-3" style="position: relative; display: flex; justify-content: center; align-items: center; width: 100%; max-width: 400px;">
                                        <input type="text" id="topicInput" class="form-control form-control-sm" placeholder="Topic (e.g., 'Space Adventure')" style="font-size: 0.875rem; padding: 0.375rem 0.75rem; border-radius: 4px; border: 2px solid #ccc;">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary cute-btn" type="button" title="Random Word" style="padding: 0.5rem; font-size: 1rem; border-radius: 30%; background-color: #ff7f50; color: white; border: none; cursor: pointer; position: relative; z-index: 2;">
                                                <i class="fas fa-dice"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-start">
                                        <button id="directGenerateStoryBtn" class="btn btn-success btn-sm" style="padding: 0.375rem 0.75rem; font-size: 0.875rem;">
                                            Generate Story
                                            <span class="spinner-border spinner-border-sm ml-2" role="status" aria-hidden="true" style="display:none;"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3">
                            <div id="promptOutputContainer" class="prompt-output-container">
                                <p id="promptOutput" class="mb-0"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 order-md-3">
                    <div class="section">
                        <div class="accordion" id="customStoryAccordion">
                            <div class="card">
                                <div class="card-header" id="headingThree">
                                    <h5 class="form-label text-md-start text-lg-center">
                                        Custom Story Options
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <button id="sendToPerplexityBtn" class="btn btn-secondary" style="font-size:13px; color: #ffffff;">
                                        <i class="bi bi-send"></i> Perplexity
                                    </button>
                                    <button id="copyToChatGPTBtn" class="btn btn-success" style="font-size:13px; color: #ffffff;">
                                        <i class="bi bi-send"></i> ChatGPT
                                    </button>
                                    <button id="pasteBtn" class="btn btn-secondary cute-btn" title="Paste" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        <i class="fas fa-paste"></i> Paste
                                    </button>
                                    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#customStoryAccordion">
                                        <div class="card-body">
                                            <textarea id="story-input" class="form-control textarea" placeholder="Paste or type your custom story here..."></textarea>
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <button id="process-btn" class="btn btn-primary" style="width:100%;">
                                                    <i class="fas fa-cogs cute-icon"></i> Chat Story
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Chat and Character Section -->
                <div class="col-12 order-md-1">
                    <div class="section">
                        <div class="d-flex justify-content-center align-items-center flex-column flex-md-row mb-3">
                            <div id="character-container" class="mb-3 mb-md-0" style="display: inline-block;min-width:300px;">
                                <img id="character-image" src="https://res.cloudinary.com/dmttn34te/image/upload/v1733497437/still_2_qwmdjo.jpg" alt="Character">
                            </div>
                            <img src="https://res.cloudinary.com/dmttn34te/image/upload/v1735610368/removed-background-removebg-preview_1_wrbrg8.png" class="illustration-egg" style="display: block;" onload="if (window.innerWidth >= 768) { this.style.display = 'none'; }" />
                            <div id="chat-container" class="chat-container ml-md-4">
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="sticky-buttons">
                                <button id="prev-btn" class="btn btn-outline-secondary" title="Previous"><i class="fas fa-backward"></i></button>
                                <button id="play-btn" class="btn btn-outline-primary" title="Play"><i class="fas fa-play"></i></button>
                                <button id="stop-btn" class="btn btn-outline-danger" title="Stop"><i class="fas fa-stop"></i></button>
                                <button id="next-btn" class="btn btn-outline-secondary" title="Next"><i class="fas fa-forward"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Playback and Settings Section -->
                <div class="col-12 order-md-4">
                    <div class="section">
                        <div class="accordion" id="playbackSettingsAccordion">
                            <div class="card">
                                <div class="card-header" id="headingTwo">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                            <i class="fas fa-sliders-h mr-2"></i>More Options
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapseTwo" class="collapse hide" aria-labelledby="headingTwo" data-parent="#playbackSettingsAccordion">
                                    <div class="card-body">
                                        <div class="text-center">
                                            <div class="sticky-buttons">
                                                <button id="pause-btn" class="btn btn-outline-warning" title="Mute"><i class="fas fa-volume-mute"></i></button>
                                                <button id="read-full-btn" class="btn btn-outline-info" title="Read Full"><i class="fas fa-volume-up"></i></button>
                                                <button id="translate-btn" class="btn btn-outline-success" title="Translate Story"><i class="fas fa-language"></i></button>
                                            </div>
                                            <div class="sticky-buttons">
                                                <button id="save-btn" class="btn btn-outline-secondary" title="Save Story"><i class="fas fa-save"></i></button>
                                                <button id="load-btn" class="btn btn-outline-secondary" title="Load Story"><i class="fas fa-upload"></i></button>
                                                <button id="edit-btn" class="btn btn-outline-secondary" title="Edit"><i class="fas fa-edit"></i></button>
                                            </div>
                                            <div class="sticky-buttons" style="background:none;">
                                                <button id="downloadStoryBtn" class="btn cute-btn" title="Download"><i class="fas fa-download cute-icon"></i> Download</button>
                                                <button id="uploadStoryBtn" class="btn cute-btn" title="Upload"><i class="fas fa-upload cute-icon"></i> Upload</button>
                                                <input type="file" id="uploadStoryFile" style="display:none;">
                                            </div>
                                            <label for="speedControl" class="form-label mt-3 d-block font-weight-bold">
                                                Speed: <span id="speedValue" class="ml-2">1.0</span>
                                            </label>
                                            <input type="range" id="speedControl" class="form-range w-50" min="0.5" max="2" step="0.1" value="1">
                                        </div>
                                        <div class="progress m-3" style="background-color: transparent; border: none;height:0px;">
                                            <div id="audio-progress" class="progress-bar" role="progressbar" style="width: 90%; background-color: transparent; border: none;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Achievements Section -->
                <div class="col-12 order-md-5">
                    <div class="section">
                        <h5 class="form-label text-md-start text-lg-center">Achievements</h5>
                        <div id="achievements-container" class="achievements-container"></div>
                        <img src="https://res.cloudinary.com/dmttn34te/image/upload/v1735623568/output-onlinegiftools_ygzbjo.gif" class="illustration-1">
                    </div>
                </div>
            </div>
        </div>
        <div id="status-message" class="text-muted mt-2 text-center">
            Your notification message here.
        </div>
        <img src="https://res.cloudinary.com/dmttn34te/image/upload/v1735057499/8f1be6e7-3ed4-41b2-9c5f-2d29e86ef39c-removebg-preview_bifn2a.png" alt="Cute Illustration" class="illustration">
    </div>
    <footer class="border-top py-3">
        <div class="container-fluid">
            <div class="d-flex align-items-center justify-content-end">
                <select id="languageSelect" class="form-select form-control me-3" style="width: auto;">
                    <option value="hi-IN">Hindi</option>
                    <option value="en-US">English</option>
                    <option value="bn-BD">Bengali</option>
                </select>
                <button id="helpBtn" class="btn btn-info ml-3" data-toggle="modal" data-target="#helpModal" title="How to Use">
                    <i class="fas fa-question-circle"></i>
                </button>
                <button id="resetBtn" class="btn btn-danger me-2" title="Reset All">
                    <i class="fas fa-sync"></i>
                </button>
                <button class="theme-switcher btn btn-sm btn-dark" title="Toggle Theme">
                    <i class="bi bi-moon-stars"></i>
                </button>
            </div>
        </div>
    </footer>
    <div class="modal fade custom-modal" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="helpModalLabel">How to Use</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body text-left text-info">
                    <p>Welcome to the Interactive Story Platform! Follow these steps:</p>
                    <ul>
                        <li><strong>Choose your age:</strong> Select your age group to get tailored prompts.</li>
                        <li><strong>Enter Topic:</strong> Type a topic in the input box (e.g., "animals", "space"). Or use the dice for a random one!</li>
                        <li><strong>Select Language:</strong> Choose your language (English, Hindi, Bengali).</li>
                        <li><strong>Generate Story:</strong> Click the "Generate Story" to get a full story based on your input!</li>
                        <li><strong>Or Build Your Own Story:</strong> Paste or type your own story into the large input box, then click "Process".</li>
                        <li><strong>Edit Story:</strong> Click "Edit Story" to make any necessary adjustments!</li>
                        <li><strong>Play & Navigate:</strong> Use the player controls to listen and move through the story as audio.</li>
                        <li><strong>Download & Upload:</strong> Save your stories for later or load from files!.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade custom-modal" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit Story</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    <textarea id="edit-story-area" class="form-control textarea" rows="10"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button id="save-edit-btn" class="btn btn-primary">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="index.js"></script>
    <script>
        $(function() {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
</body>

</html>